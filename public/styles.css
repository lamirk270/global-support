/* =========================================
   Global Design System — Premium Look
   ========================================= */
:root{
  --brand-start: #6ea9ff;
  --brand-end:   #8b5cff;
  --ink-1: rgba(255,255,255,0.92);
  --ink-2: rgba(255,255,255,0.78);
  --ink-3: rgba(255,255,255,0.55);
  --line-1: rgba(255,255,255,0.18);
  --line-2: rgba(255,255,255,0.10);
  --glass-1: rgba(255,255,255,0.12);
  --glass-2: rgba(255,255,255,0.06);
  --shadow-1: 0 10px 30px rgba(10,20,60,0.25);
  --shadow-2: 0 6px 18px rgba(10,20,60,0.20);
  --shadow-soft: 0 4px 14px rgba(20,30,70,0.12);
  --radius-lg: 16px;
  --radius-md: 12px;
  --radius-sm: 10px;
  --blur: 10px;
  --focus: 0 0 0 2px rgba(110,169,255,.45), 0 0 1px 1px rgba(139,92,255,.35);
}

*{ box-sizing:border-box; }
html, body{ height:100%; }
body{
  margin:0;
  color:var(--ink-1);
  font: 14px/1.6 ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC","Hiragino Sans GB","Microsoft YaHei", "SF Pro Text", "Helvetica Neue", Arial, "Noto Sans", "Noto Sans CJK SC","Noto Sans CJK TC", sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  letter-spacing:.2px;
}

/* Smooth scrolling */
html{ scroll-behavior:smooth; }
@media (prefers-reduced-motion: reduce){
  *{ animation: none !important; transition: none !important; }
  html{ scroll-behavior:auto; }
}

/* =========================================
   Layout Containers
   ========================================= */
.container{
  width:100%;
  max-width:1100px;
  margin:0 auto;
  padding:12px 18px 26px;
  position: relative;
  z-index: 1;
}

/* =========================================
   Message List
   ========================================= */
#msgs, .msgs{
  position:relative;
  height: 60vh;
  max-height: calc(100vh - 220px);
  min-height: 320px;
  overflow:auto;
  padding: 14px 8px 18px;
  scrollbar-width: thin;
  scrollbar-color: rgba(120,130,200,0.45) transparent;
  z-index: 1;
}

/* WebKit Scrollbar */
#msgs::-webkit-scrollbar, .msgs::-webkit-scrollbar{ width:10px; }
#msgs::-webkit-scrollbar-track, .msgs::-webkit-scrollbar-track{ background: transparent; }
#msgs::-webkit-scrollbar-thumb, .msgs::-webkit-scrollbar-thumb{
  background: rgba(120,130,200,0.35);
  border-radius: 8px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
#msgs::-webkit-scrollbar-thumb:hover, .msgs::-webkit-scrollbar-thumb:hover{ background: rgba(120,130,200,0.55); }

/* 消息条目 */
.msg{
  display:flex; align-items:flex-start; gap:10px;
  margin: 10px 6px;
  animation: bubbleIn .3s ease both;
}
@keyframes bubbleIn{
  from{ opacity:0; transform: translateY(4px) scale(.98); }
  to{ opacity:1; transform: translateY(0) scale(1); }
}
.msg .avatar{
  width:26px; height:26px; border-radius: 50%;
  box-shadow: var(--shadow-soft);
  flex:0 0 auto;
}
.msg > div{
  background: linear-gradient(180deg, var(--glass-1), var(--glass-2));
  border: 1px solid var(--line-1);
  border-radius: var(--radius-lg);
  padding: 12px 14px;
  color: var(--ink-1);
  box-shadow: var(--shadow-soft);
  word-break: break-word;
  max-width: 76ch;
}
.msg.me{ justify-content:flex-end; }
.msg.me > div{
  background: linear-gradient(180deg, rgba(110,169,255,0.22), rgba(139,92,255,0.20));
  border: 1px solid rgba(130,150,255,0.35);
  color:#fff;
  box-shadow: 0 8px 24px rgba(110,169,255,.18);
}
.msg.me .avatar{ display:none; }
.msg img{
  display:block; max-width: 48vw; height:auto; border-radius: 12px;
  box-shadow: var(--shadow-2);
}
@media (max-width: 960px){ .msg img{ max-width: 76vw; } }
.msg .msg-link{
  color:var(--ink-1);
  text-decoration:none;
  border-bottom: 1px dashed rgba(180,190,255,.45);
  transition: color .2s ease, border-color .2s ease, background-color .2s ease;
}
.msg .msg-link:hover{
  color:#cfe0ff;
  border-color: rgba(110,169,255,.8);
}

/* Resume pill */
.resume-pill{
  margin: 8px auto 0;
  display: inline-flex; align-items:center; gap:8px;
  padding: 8px 12px;
  color: var(--ink-1);
  background: linear-gradient(180deg, var(--glass-1), var(--glass-2));
  border:1px solid var(--line-1);
  border-radius: 999px;
  cursor:pointer;
  box-shadow: var(--shadow-soft);
  transition: transform .18s ease, background .18s ease, border-color .18s ease, box-shadow .18s ease;
}
.resume-pill:hover{
  transform: translateY(-1px);
  background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.10));
  border-color: rgba(255,255,255,.28);
  box-shadow: var(--shadow-2);
}
.resume-pill svg{ width:14px; height:14px; fill: currentColor; opacity:.9; }

/* =========================================
   Composer
   ========================================= */
#composer{
  display:flex; align-items:center; gap:10px;
  padding: 12px;
  border-top: 1px solid var(--line-2);
  background: linear-gradient(180deg, rgba(0,0,0,0.08), rgba(0,0,0,0.14));
  backdrop-filter: blur(var(--blur));
  position: sticky;
  bottom: 0;
  z-index: 2;
}
#input{
  flex:1 1 auto;
  background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
  border:1px solid var(--line-1);
  color: var(--ink-1);
  padding: 12px 12px;
  border-radius: var(--radius-md);
  outline: none;
}
#input::placeholder{ color: var(--ink-3); }
#input:focus{ box-shadow: var(--focus); border-color: rgba(110,169,255,.45); }
#send, #btn-end{
  appearance:none; border:none; cursor:pointer;
  padding: 10px 14px;
  border-radius: var(--radius-md);
  color:#fff; font-weight:700;
  background: linear-gradient(90deg, var(--brand-start), var(--brand-end));
  box-shadow: 0 10px 24px rgba(110,169,255,.25);
}
#btn-end{
  background: linear-gradient(90deg, #ff6a7a, #ff3d5e);
  box-shadow: 0 10px 24px rgba(255,90,107,.25);
}

/* =========================================
   UID Modal
   ========================================= */
#uidModal{
  position: fixed; inset:0;
  display:none;
  align-items:center; justify-content:center;
  background: rgba(5,8,20,.38);
  backdrop-filter: blur(4px);
  z-index: 30;
}
#uidModal .modal-card{
  background: linear-gradient(180deg, var(--glass-1), var(--glass-2));
  border:1px solid var(--line-1);
  border-radius: 18px;
  padding: 18px 18px 14px;
  box-shadow: var(--shadow-1);
  min-width: 280px; max-width: 360px;
  color: var(--ink-1);
}
#uidInput{
  width:100%; padding: 12px;
  border-radius: var(--radius-md);
  border:1px solid var(--line-1);
  background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
  color:#fff;
}
#uidOk{
  margin-top:10px; width:100%;
  border:none; cursor:pointer;
  background: linear-gradient(90deg, var(--brand-start), var(--brand-end));
  color:#fff; font-weight:800;
  padding:10px 12px; border-radius: var(--radius-md);
  box-shadow: 0 10px 24px rgba(110,169,255,.25);
}

/* =========================================
   Toast
   ========================================= */
#toast{
  position: fixed; left:50%; bottom: 26px; transform: translateX(-50%);
  display:flex; align-items:center; gap:8px;
  padding: 10px 12px;
  color:#fff;
  background: linear-gradient(180deg, var(--glass-1), var(--glass-2));
  border:1px solid var(--line-1);
  border-radius: 12px;
  box-shadow: var(--shadow-2);
  opacity:0; pointer-events:none;
  z-index: 40;
}
#toast.show{ opacity:1; pointer-events:auto; transition: opacity .18s ease, transform .18s ease; }

/* =========================================
   Hotfix: Background layering
   ========================================= */
#bg{
  position: fixed !important;
  inset: 0 !important;
  z-index: 0 !important;
}
